@inject AppState AppState
@implements IDisposable

<div class="bg-white rounded-lg border border-gray-200 p-3">
    <div class="text-xs text-gray-600 mb-1">Current Selection</div>
    @if (AppState.SelectedDriver is null)
    {
        <div class="text-xs sm:text-sm text-gray-700">No driver selected</div>
    }
    else
    {
        <div class="text-xs sm:text-sm text-gray-900">
            <strong>@AppState.SelectedDriver.Name</strong>
            · @AppState.SelectedDriver.LicenseLevel
            · @AppState.SelectedDriver.YearsOfExperience yrs
        </div>
        <div class="mt-2">
            <button class="px-3 py-1.5 rounded border border-gray-300 hover:bg-gray-50 text-xs sm:text-sm" @onclick="Clear">Clear</button>
        </div>
    }
</div>

@code {
    protected override void OnInitialized()
    {
        AppState.OnChange += OnStateChanged;
    }

    private void OnStateChanged() => InvokeAsync(StateHasChanged);

    private void Clear() => AppState.ClearSelection();

    public void Dispose()
    {
        AppState.OnChange -= OnStateChanged;
    }
}
