@page "/admin-examples/demo-dashboard"
@rendermode InteractiveServer
@inherits AdminDashboardExampleBase

<h3 class="text-xl font-semibold mb-3">Admin Dashboard Demo (Role-Aware)</h3>

@if (!IsAuthenticated)
{
    <p class="text-sm text-gray-600">You are not signed in. Go to the auth demo first and sign in as a Regular user or Admin.</p>
}
else
{
    <div class="grid gap-4 md:grid-cols-3 mb-4">
        <div class="bg-white rounded-xl p-4 border border-gray-200">
            <p class="text-xs text-gray-500 mb-1">Current user</p>
            <p class="text-sm text-gray-800 font-semibold">@CurrentUser!.UserName</p>
            <p class="text-xs text-gray-600 mt-1">Roles: @(string.Join(", ", CurrentUser.Roles))</p>
            <p class="text-xs text-gray-600 mt-1">Auth method: @AuthMethod</p>
        </div>

        <div class="bg-white rounded-xl p-4 border border-gray-200">
            <p class="text-xs text-gray-500 mb-1">MRR (visible to all)</p>
            <p class="text-2xl font-bold text-gray-900">$24,300</p>
            <p class="text-xs text-gray-600 mt-1">Regular users can safely see this.</p>
        </div>

        <div class="bg-white rounded-xl p-4 border border-gray-200">
            <p class="text-xs text-gray-500 mb-1">Active subscriptions (visible to all)</p>
            <p class="text-2xl font-bold text-gray-900">1,204</p>
            <p class="text-xs text-gray-600 mt-1">Read-only metrics are safe for everyone.</p>
        </div>
    </div>

    @if (IsAdmin)
    {
        <div class="bg-white rounded-xl p-4 border border-red-200 mb-4">
            <p class="text-xs text-red-600 mb-1 font-semibold">Admin-only: Danger Zone</p>
            <p class="text-sm text-gray-800 mb-2">Only admins can see and use destructive actions.</p>
            <button class="px-4 py-2 text-sm font-medium bg-red-600 hover:bg-red-700 text-white rounded transition-colors">Cancel 10 test subscriptions</button>
        </div>
    }
    else
    {
        <div class="bg-yellow-50 rounded-xl p-4 border border-yellow-200 mb-4">
            <p class="text-xs text-yellow-700 mb-1 font-semibold">Admin section hidden</p>
            <p class="text-sm text-yellow-800">You are signed in as a Regular user, so admin-only sections stay hidden.</p>
        </div>
    }
}
